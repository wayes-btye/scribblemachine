@tailwind base;
@tailwind components;
@tailwind utilities;

/* Optimized font loading: Only 3 families with font-display:swap for faster rendering */
@import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Architects+Daughter&family=Space+Grotesk:wght@500;600;700&display=swap');

@layer base {
  :root {
    /* OKLCH Color System - Advanced Design Foundation */
    --background: oklch(0.98 0.01 45);
    --foreground: oklch(0.15 0.12 260);
    --card: oklch(1.0 0 0);
    --card-foreground: oklch(0.15 0.12 260);
    --popover: oklch(1.0 0 0);
    --popover-foreground: oklch(0.15 0.12 260);
    --primary: oklch(0.68 0.20 280);
    --primary-foreground: oklch(0.99 0.01 280);
    --secondary: oklch(0.85 0.12 60);
    --secondary-foreground: oklch(0.15 0.12 260);
    --muted: oklch(0.96 0.01 45);
    --muted-foreground: oklch(0.45 0.08 260);
    --accent: oklch(0.78 0.16 25);
    --accent-foreground: oklch(0.99 0.01 25);
    --destructive: oklch(0.64 0.26 25);
    --destructive-foreground: oklch(0.98 0.02 25);
    --border: oklch(0.92 0.03 45);
    --input: oklch(0.92 0.03 45);
    --ring: oklch(0.68 0.20 280);
    --chart-1: oklch(0.68 0.20 280);
    --chart-2: oklch(0.85 0.12 60);
    --chart-3: oklch(0.78 0.16 25);
    --chart-4: oklch(0.75 0.18 150);
    --chart-5: oklch(0.72 0.20 320);
    --sidebar: oklch(0.99 0.01 45);
    --sidebar-foreground: oklch(0.15 0.12 260);
    --sidebar-primary: oklch(0.68 0.20 280);
    --sidebar-primary-foreground: oklch(0.99 0.01 280);
    --sidebar-accent: oklch(0.78 0.16 25);
    --sidebar-accent-foreground: oklch(0.99 0.01 25);
    --sidebar-border: oklch(0.92 0.03 45);
    --sidebar-ring: oklch(0.68 0.20 280);

    /* Typography System - System font fallbacks for instant rendering */
    --font-sans: 'DM Sans', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    --font-serif: 'Architects Daughter', 'Comic Sans MS', cursive;
    --font-accent: 'Space Grotesk', system-ui, sans-serif;

    /* Enhanced Design Tokens */
    --radius: 0.75rem;
    --radius-sm: calc(var(--radius) - 4px);
    --radius-md: calc(var(--radius) - 2px);
    --radius-lg: var(--radius);
    --radius-xl: calc(var(--radius) + 4px);

    /* Sophisticated Shadow System */
    --shadow-2xs: 0 1px 4px 0px oklch(0.15 0.12 260 / 0.06);
    --shadow-xs: 0 1px 6px 0px oklch(0.15 0.12 260 / 0.08);
    --shadow-sm: 0 2px 8px 0px oklch(0.15 0.12 260 / 0.10), 0 1px 3px -1px oklch(0.15 0.12 260 / 0.10);
    --shadow: 0 3px 12px 0px oklch(0.15 0.12 260 / 0.12), 0 2px 4px -1px oklch(0.15 0.12 260 / 0.10);
    --shadow-md: 0 4px 16px 0px oklch(0.15 0.12 260 / 0.12), 0 3px 6px -1px oklch(0.15 0.12 260 / 0.10);
    --shadow-lg: 0 6px 20px 0px oklch(0.15 0.12 260 / 0.15), 0 4px 8px -1px oklch(0.15 0.12 260 / 0.10);
    --shadow-xl: 0 8px 28px 0px oklch(0.15 0.12 260 / 0.18), 0 6px 12px -1px oklch(0.15 0.12 260 / 0.10);
    --shadow-2xl: 0 12px 40px 0px oklch(0.15 0.12 260 / 0.25);

    /* Artistic Gradient System - Simplified for better performance */
    --gradient-bg: radial-gradient(ellipse 120% 100% at 30% 20%, oklch(0.99 0.06 320 / 0.35), transparent 65%),
                   linear-gradient(135deg, oklch(0.99 0.02 45), oklch(0.97 0.03 60));

    --gradient-card: linear-gradient(135deg,
      oklch(1.0 0 0 / 0.95) 0%,
      oklch(0.99 0.01 280 / 0.9) 100%);

    --gradient-hero: linear-gradient(135deg,
      oklch(0.68 0.20 280) 0%,
      oklch(0.72 0.18 300) 50%,
      oklch(0.78 0.16 25) 100%);

    --gradient-accent: linear-gradient(135deg,
      oklch(0.85 0.12 60) 0%,
      oklch(0.82 0.14 80) 100%);

    /* Whimsical Paint Splatter Pattern */
    --paint-splatter: url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ff9ff3' fill-opacity='0.04'%3E%3Ccircle cx='12' cy='12' r='3'/%3E%3Ccircle cx='35' cy='8' r='2'/%3E%3Ccircle cx='65' cy='15' r='2.5'/%3E%3Ccircle cx='20' cy='45' r='1.5'/%3E%3Ccircle cx='55' cy='52' r='2'/%3E%3Ccircle cx='8' cy='68' r='2.5'/%3E%3C/g%3E%3Cg fill='%2365c3f7' fill-opacity='0.03'%3E%3Ccircle cx='25' cy='30' r='2'/%3E%3Ccircle cx='50' cy='22' r='1.5'/%3E%3Ccircle cx='15' cy='62' r='2'/%3E%3Ccircle cx='70' cy='45' r='1.5'/%3E%3C/g%3E%3Cg fill='%23feca57' fill-opacity='0.025'%3E%3Ccircle cx='40' cy='15' r='1.5'/%3E%3Ccircle cx='8' cy='35' r='2'/%3E%3Ccircle cx='60' cy='65' r='2.5'/%3E%3Ccircle cx='28' cy='68' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");

    --tracking-normal: 0em;
    --spacing: 0.25rem;
  }

  .dark {
    --background: oklch(0.1 0.01 260);
    --foreground: oklch(0.98 0.01 260);
    --card: oklch(0.12 0.01 260);
    --card-foreground: oklch(0.98 0.01 260);
    --popover: oklch(0.12 0.01 260);
    --popover-foreground: oklch(0.98 0.01 260);
    --primary: oklch(0.75 0.18 280);
    --primary-foreground: oklch(0.1 0.01 280);
    --secondary: oklch(0.2 0.01 260);
    --secondary-foreground: oklch(0.98 0.01 260);
    --muted: oklch(0.15 0.01 260);
    --muted-foreground: oklch(0.65 0.05 260);
    --accent: oklch(0.8 0.15 25);
    --accent-foreground: oklch(0.1 0.01 25);
    --destructive: oklch(0.7 0.25 25);
    --destructive-foreground: oklch(0.98 0.01 25);
    --border: oklch(0.2 0.01 260);
    --input: oklch(0.2 0.01 260);
    --ring: oklch(0.75 0.18 280);
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-family: var(--font-sans);
    background: var(--gradient-bg);
    background-attachment: fixed;
    min-height: 100vh;
    position: relative;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    font-feature-settings: 'kern' 1, 'liga' 1;
  }

  /* Mobile-specific optimizations */
  @media (max-width: 768px) {
    body {
      /* Simpler gradient on mobile to reduce GPU load */
      background: linear-gradient(135deg, oklch(0.99 0.02 45), oklch(0.97 0.03 60));
      background-attachment: scroll;
    }
  }

  /* Typography Classes - Removed !important for better performance */
  .handwritten {
    font-family: var(--font-serif);
  }

  .modern-sans,
  .refined-sans {
    font-family: var(--font-accent);
    font-weight: 600;
    letter-spacing: -0.02em;
  }

  h1, h2, h3 {
    font-family: var(--font-sans);
    font-weight: 700;
    line-height: 1.2;
    letter-spacing: -0.01em;
  }
}

@layer components {
  /* Creative Paint Dreams Animation System */
  @keyframes creativePaintFloat1 {
    0% {
      opacity: 0.45;
      transform: translateY(-16px) translateX(-6px) translateZ(0) scale(0.48) rotate(4deg);
      border-radius: 62% 38% 48% 72%;
      filter: blur(2.8px);
    }
    25% {
      opacity: 0.52;
      transform: translateY(-5px) translateX(-2px) translateZ(0) scale(0.52) rotate(7deg);
      border-radius: 58% 42% 52% 68%;
      filter: blur(2.6px);
    }
    50% {
      opacity: 0.65;
      transform: translateY(32px) translateX(10px) translateZ(0) scale(0.68) rotate(15deg);
      border-radius: 48% 52% 62% 38%;
      filter: blur(1.8px);
    }
    75% {
      opacity: 0.52;
      transform: translateY(-5px) translateX(-2px) translateZ(0) scale(0.52) rotate(23deg);
      border-radius: 58% 42% 52% 68%;
      filter: blur(2.6px);
    }
    100% {
      opacity: 0.45;
      transform: translateY(-16px) translateX(-6px) translateZ(0) scale(0.48) rotate(31deg);
      border-radius: 62% 38% 48% 72%;
      filter: blur(2.8px);
    }
  }

  @keyframes creativePaintFloat2 {
    0% {
      opacity: 0.42;
      transform: translateX(22px) translateY(-15px) translateZ(0) scale(0.42) rotate(-7deg);
      border-radius: 66% 34% 44% 56%;
      filter: blur(2.8px);
    }
    25% {
      opacity: 0.48;
      transform: translateX(8px) translateY(-6px) translateZ(0) scale(0.46) rotate(-9deg);
      border-radius: 62% 38% 48% 52%;
      filter: blur(2.6px);
    }
    50% {
      opacity: 0.58;
      transform: translateX(-22px) translateY(26px) translateZ(0) scale(0.58) rotate(-11deg);
      border-radius: 34% 66% 56% 44%;
      filter: blur(1.8px);
    }
    75% {
      opacity: 0.48;
      transform: translateX(8px) translateY(-6px) translateZ(0) scale(0.46) rotate(-20deg);
      border-radius: 62% 38% 48% 52%;
      filter: blur(2.6px);
    }
    100% {
      opacity: 0.42;
      transform: translateX(22px) translateY(-15px) translateZ(0) scale(0.42) rotate(-29deg);
      border-radius: 66% 34% 44% 56%;
      filter: blur(2.8px);
    }
  }

  @keyframes enhancedColorBleed {
    0%, 100% {
      opacity: 0.32;
      transform: scale(0.84) translateX(-3.5px) translateZ(0);
      background-size: 100% 100%;
    }
    50% {
      opacity: 0.46;
      transform: scale(1.05) translateX(2.5px) translateZ(0);
      background-size: 110% 110%;
    }
  }

  @keyframes enhancedColorBleed2 {
    0%, 100% {
      opacity: 0.28;
      transform: scale(0.91) translateY(-2.5px) translateZ(0);
      background-size: 100% 100%;
    }
    50% {
      opacity: 0.38;
      transform: scale(1.03) translateY(1.5px) translateZ(0);
      background-size: 106% 106%;
    }
  }

  @keyframes elegantWatercolorFade {
    0% {
      opacity: 0.38;
      transform: scale(0.82) rotate(2.5deg) translateX(4.5px) translateZ(0);
      filter: blur(2.8px) saturate(1.15);
    }
    25% {
      opacity: 0.44;
      transform: scale(0.92) rotate(1deg) translateX(5.5px) translateZ(0);
      filter: blur(3.3px) saturate(1.08);
    }
    50% {
      opacity: 0.52;
      transform: scale(1.02) rotate(-1.5deg) translateX(6.5px) translateZ(0);
      filter: blur(3.8px) saturate(1.0);
    }
    75% {
      opacity: 0.42;
      transform: scale(0.88) rotate(0.5deg) translateX(5.5px) translateZ(0);
      filter: blur(3.0px) saturate(1.12);
    }
    100% {
      opacity: 0.38;
      transform: scale(0.82) rotate(2.5deg) translateX(4.5px) translateZ(0);
      filter: blur(2.8px) saturate(1.15);
    }
  }

  @keyframes elegantCornerFloat {
    0%, 100% {
      clip-path: ellipse(34% 46% at 16% 16%);
      transform: rotate(0deg) translateZ(0);
      opacity: 0.35;
    }
    25% {
      clip-path: ellipse(46% 34% at 74% 20%);
      transform: rotate(90deg) translateZ(0);
      opacity: 0.48;
    }
    50% {
      clip-path: ellipse(41% 51% at 80% 74%);
      transform: rotate(180deg) translateZ(0);
      opacity: 0.42;
    }
    75% {
      clip-path: ellipse(51% 39% at 20% 80%);
      transform: rotate(270deg) translateZ(0);
      opacity: 0.38;
    }
  }

  @keyframes fadeInUp {
    0% { opacity: 0; transform: translateY(30px); }
    100% { opacity: 1; transform: translateY(0); }
  }

  @keyframes scaleIn {
    0% { opacity: 0; transform: scale(0.9); }
    100% { opacity: 1; transform: scale(1); }
  }

  @keyframes logoFloat {
    0%, 100% { transform: translateY(0px) scale(1); }
    50% { transform: translateY(-10px) scale(1.02); }
  }

  @keyframes iconFloat {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-8px); }
  }

  @keyframes iconPulse {
    0%, 100% { transform: scale(1); opacity: 0.8; }
    50% { transform: scale(1.1); opacity: 1; }
  }

  @keyframes iconRotate {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  /* Animation Classes */
  .creative-paint-float-1 {
    animation: creativePaintFloat1 12s ease-in-out infinite;
    animation-fill-mode: both;
    animation-play-state: running;
  }

  .creative-paint-float-2 {
    animation: creativePaintFloat2 14s ease-in-out infinite;
    animation-fill-mode: both;
    animation-play-state: running;
  }

  .enhanced-color-bleed {
    animation: enhancedColorBleed 15s ease-in-out infinite;
    animation-fill-mode: both;
    animation-play-state: running;
  }

  .enhanced-color-bleed-2 {
    animation: enhancedColorBleed2 13s ease-in-out infinite;
    animation-fill-mode: both;
    animation-play-state: running;
  }

  .elegant-watercolor-fade {
    animation: elegantWatercolorFade 11s ease-in-out infinite;
    animation-fill-mode: both;
    animation-play-state: running;
  }

  .elegant-corner-float {
    animation: elegantCornerFloat 18s ease-in-out infinite;
    animation-fill-mode: both;
    animation-play-state: running;
  }

  /* CSS-only scroll animations - No JavaScript needed for better performance */
  .fade-in-up {
    animation: fadeInUp 0.8s ease-out forwards;
    opacity: 0;
  }

  .scale-in {
    animation: scaleIn 0.8s ease-out forwards;
    opacity: 0;
  }

  .logo-float { animation: logoFloat 4s ease-in-out infinite; }
  .icon-float { animation: iconFloat 3s ease-in-out infinite; }
  .icon-pulse { animation: iconPulse 2s ease-in-out infinite; }
  .icon-rotate { animation: iconRotate 20s linear infinite; }

  /* Hero book hover animation */
  .hero-book:hover {
    transform: perspective(1000px) rotateY(-2deg) rotateX(1deg) scale(1.02) !important;
    filter: drop-shadow(0 35px 70px oklch(0.15 0.12 260 / 0.3)) drop-shadow(0 15px 30px oklch(0.15 0.12 260 / 0.2)) !important;
  }

  /* Mobile Performance Optimization */
  @media (max-width: 768px) {
    /* Reduce number of animated blobs on mobile for performance - hide elements 9+ */
    .creative-paint-float-1:nth-of-type(n+3),
    .creative-paint-float-2:nth-of-type(n+3),
    .enhanced-color-bleed:nth-of-type(n+2),
    .enhanced-color-bleed-2:nth-of-type(n+2),
    .elegant-watercolor-fade:nth-of-type(n+2),
    .elegant-corner-float:nth-of-type(n+2) {
      display: none !important;
    }

    /* Reduce animation complexity on mobile */
    .creative-paint-float-1,
    .creative-paint-float-2 {
      animation-duration: 10s;
    }

    .enhanced-color-bleed,
    .enhanced-color-bleed-2 {
      animation-duration: 12s;
    }

    .elegant-watercolor-fade {
      animation-duration: 9s;
    }

    .elegant-corner-float {
      animation-duration: 14s;
    }

    /* CRITICAL: Disable expensive backdrop-blur on mobile */
    .backdrop-blur-sm,
    .backdrop-blur,
    .backdrop-blur-md,
    .backdrop-blur-lg {
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
    }

    /* CRITICAL: Convert gradient text to solid colors on mobile */
    .bg-gradient-to-r.bg-clip-text {
      background: none !important;
      -webkit-background-clip: unset !important;
      background-clip: unset !important;
      -webkit-text-fill-color: unset !important;
    }

    /* Assign solid colors to gradient text elements */
    .from-purple-600.to-pink-600.bg-clip-text {
      color: rgb(147 51 234) !important; /* purple-600 */
    }

    .from-orange-500.to-red-500.bg-clip-text {
      color: rgb(249 115 22) !important; /* orange-500 */
    }

    .from-blue-600.to-teal-600.bg-clip-text {
      color: rgb(37 99 235) !important; /* blue-600 */
    }

    /* Simplify hero image transforms on mobile */
    .hero-book {
      filter: drop-shadow(0 10px 25px rgba(0, 0, 0, 0.15)) !important;
      transform: none !important;
    }

    /* Disable hover effects on touch devices */
    @media (hover: none) and (pointer: coarse) {
      .hover\:transform,
      .hover\:-translate-y-2,
      .hover\:shadow-xl,
      .group-hover\:translate-x-full {
        transform: none !important;
        box-shadow: none !important;
      }

      .group:hover .group-hover\:translate-x-full {
        transform: none !important;
      }
    }

    /* Simplify gradient backgrounds on mobile */
    .bg-gradient-to-br {
      background: linear-gradient(135deg, var(--primary), var(--primary)) !important;
    }

    /* Reduce filter complexity */
    .drop-shadow-2xl,
    .drop-shadow-xl {
      filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.15)) !important;
    }

    /* CRITICAL: Disable will-change on mobile to reduce GPU memory */
    * {
      will-change: auto !important;
    }

    /* Disable all icon animations on mobile */
    .icon-float,
    .icon-pulse,
    .icon-rotate,
    .logo-float {
      animation: none !important;
    }

    /* Simplify scroll animations */
    .fade-in-up,
    .scale-in {
      transition-duration: 0.4s !important;
    }
  }

  /* Staggered Animation Delays */
  .delay-100 { animation-delay: 0.1s; }
  .delay-200 { animation-delay: 0.2s; }
  .delay-300 { animation-delay: 0.3s; }
  .delay-400 { animation-delay: 0.4s; }

  /* Enhanced Button Styles - Removed !important for better performance */
  .btn-primary {
    background: var(--gradient-hero);
    color: white;
    border-radius: var(--radius-lg);
    padding: 1rem 2rem;
    font-weight: 600;
    font-size: 1.125rem;
    font-family: var(--font-sans);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: var(--shadow-lg);
    border: none;
    position: relative;
    overflow: hidden;
    white-space: nowrap;
  }

  .btn-primary:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: var(--shadow-xl);
  }

  .btn-secondary {
    background: var(--gradient-accent);
    color: white;
    border: 2px solid transparent;
    border-radius: var(--radius-lg);
    padding: 1rem 2rem;
    font-weight: 600;
    font-size: 1.125rem;
    font-family: var(--font-sans);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: var(--shadow);
  }

  .btn-secondary:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: var(--shadow-lg);
    background: var(--gradient-hero);
  }

  /* Mobile button optimizations */
  @media (max-width: 768px) {
    .btn-primary,
    .btn-secondary {
      transition-duration: 0.2s;
    }

    .btn-primary:hover,
    .btn-secondary:hover {
      transform: none;
    }
  }
}